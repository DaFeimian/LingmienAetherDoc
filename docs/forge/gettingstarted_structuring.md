---
title: 组织你的模组
order: 2
toc: content
group:
  title: 入门指南
  order: 9984
---
组织你的模组
====================

结构化的模组有助于维护、贡献以及更清晰地理解基础代码库。以下是来自 Java、Minecraft 和 Forge 的一些建议。

!!! 注意
    你不必遵循以下建议；可以根据自己的需要来组织模组。然而，仍然强烈建议这样做。

包结构
---------

在组织你的模组时，选择一个独特的顶级包结构。许多程序员会为不同的类、接口等使用相同的名称。Java 允许类在不同的包中具有相同的名称。因此，如果两个类具有相同包名且名称相同，仅会加载一个，这很可能导致游戏崩溃。

```
a.jar
  - com.example.ExampleClass
b.jar
  - com.example.ExampleClass // 这个类通常不会被加载
```

在加载模块时，这一点尤为重要。如果两个不同模块中的包下存在相同名称的类文件，这将导致模组加载器在启动时**崩溃**，因为模组模块会被导出至游戏及其他模组中。

```
模块 A
  - 包 X
    - 类 I
    - 类 J
模块 B
  - 包 X // 该包会导致模组加载器崩溃，因为已经有一个包含包 X 的模块被导出
    - 类 R
    - 类 S
    - 类 T
```

因此，你的顶级包应该是你拥有的某种标识：一个域名、电子邮件地址、你网站的子域等。它甚至可以是你的名字或用户名，只要你能保证在目标范围内是唯一可识别的。

类型      | 值               | 顶级包
:---:     | :---:            | :---
域名      | example.com      | `com.example`
子域      | example.github.io | `io.github.example`
邮箱      | example@gmail.com | `com.gmail.example`

下一级包应该是你的模组 ID（例如，`com.example.examplemod`，其中 `examplemod` 是模组 ID）。这将保证，除非你有两个相同 ID 的模组（这不应该发生），否则你的包加载时不会出现任何问题。

你可以在 [Oracle 的教程页面][naming]上找到一些额外的命名惯例。

### 子包组织

除了顶级包，强烈建议将模组的类分在子包中。关于如何做，有两种主要的方法：

* **按功能分组**：为具有共同用途的类创建子包。例如，方块可以放在 `block` 或 `blocks` 下，实体放在 `entity` 或 `entities` 下等。Mojang 使用单词的单数形式来组织。
* **按逻辑分组**：为具有共同逻辑的类创建子包。例如，如果你在创建新类型的制作台，你可以将其方块、菜单、物品等放在 `feature.crafting_table` 下。

#### 客户端、服务器和数据包

通常，仅用于特定侧或运行时的代码应与其他类隔开，放在一个单独的子包中。例如，与[数据生成][datagen]相关的代码应该放在 `data` 包中，而仅在专用服务器上的代码应该放在 `server` 包中。

然而，强烈建议将[仅限客户端的代码][sides]隔离在 `client` 子包中。这是因为专用服务器无法访问 Minecraft 中的任何客户端专用包。因此，拥有一个专用包可以提供一个不错的检查，使你可以验证模组内是否存在跨侧操作。

类命名方案
--------------------

通用的类命名方案使得更容易理解类的目的或轻松找到特定的类。

类通常以其类型作为后缀，例如：

* 一个名为 `PowerRing` 的 `Item` -> `PowerRingItem`。
* 一个名为 `NotDirt` 的 `Block` -> `NotDirtBlock`。
* 一个 `Oven` 的菜单 -> `OvenMenu`。

!!! 注意
    Mojang 通常对所有类使用类似的结构，除了实体。实体仅用其名称表示（例如，`Pig`，`Zombie`等）。

从多种方法中选择一种
---------------------------

对于执行某个任务，如注册对象、监听事件等，有许多方法。通常建议通过使用一种方法来完成给定任务以保持一致性。这不仅改善了代码格式，还避免了可能发生的任何奇怪的交互或冗余（例如，事件监听器执行了两次）。

[naming]: https://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html
[datagen]: ../datagen/index.md
[sides]: ../concepts/sides.md